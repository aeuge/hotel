<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="/css/bootstrap.css" rel="stylesheet">
    <script src="/css/jquery-3.js" type="text/javascript" ></script>
    <script src="webjars/vue/2.5.16/vue.min.js"></script>
    <script src="/css/axios.min.js"></script>
    <link href="/css/auth.css" rel="stylesheet">
    <title th:text="#{general.info}">Info</title></head>
<body><div class="TitleTop" th:text="#{general.info}">Info</div>
<!-- Mount point -->
<div class="text-white" style="width:200px">
    <label for="beginDate" th:text="#{general.beginDate}">beginDate:</label>
    <input id="beginDate" name="beginDate" type="text" v-model="beginDate"/>
    <label for="endDate" th:text="#{general.endDate}">endDate:</label>
    <input id="endDate" name="endDate" type="text" v-model="endDate"/>
    <label id="response"></label>
</div>
<table class="text-white hotels" id="payments-table">
    <thead>
    <tr>
        <td th:text="#{general.nameHotel}">Name of hotel</td>
        <td th:text="#{general.totalAmmount}">total ammount</td>
        <td th:text="#{general.total1}">card</td>
        <td th:text="#{general.total2}">cash</td>
        <td th:text="#{general.total3}">buisness</td>
    </tr>
    </thead>
    <tbody>
    <!-- This is a Vue2 template -->
    <tr v-for="payment in payments">
        <td>{{hotel.name}}</td>
        <td>{{hotel.totalAmmount}}</td>
        <td>{{hotel.total1}}</td>
        <td>{{hotel.total2}}</td>
        <td>{{hotel.total3}}</td>
    </tr>
    </tbody>
</table>
<div>
    <div class="text-white" style="width:200px">
        <form method="get" action="/hotels">
            <button type="submit" class="btn btn-primary btn-block btn-large" th:text="#{general.listhotels}">List of Hotels</button>
        </form>
    </div>
    <div class="text-white" style="width:200px">
        <form method="get" action="/logout">
            <button type="submit" class="btn btn-primary btn-block btn-large" th:text="#{general.logout}">Logout</button>
        </form>
    </div>
</div>
<script>
    // fetch, ES6, Vue
    var date = document.getElementById('beginDate');
    var dateObj = new Date();
    dateObj.setDate(dateObj.getDate()-1);
    date.value = dateObj.toISOString().slice(0,10);
    var date2 = document.getElementById('endDate');
    var dateObj2 = new Date();
    date2.value = dateObj2.toISOString().slice(0,10);
    axios.get('/api/allpayments', {params: {beginDate : dateObj.value, endDate : dateObj2.value}})
        .then(response => {
            new Vue({
                el: '#payments-table',
                data: {
                    payments : response.data,
                    response:''
                }
            })
        });

</script>
</body>
</html>
